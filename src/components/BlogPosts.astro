---
import PrettyDate from "./PrettyDate.astro";

// todo: Limit to 3 posts
const posts = await Astro.glob('../pages/writing/*/*/*.md');
---

<p>Here are my latest posts:</p>

<div class="posts">
    {
        posts.map(post => {
            if(post.frontmatter.draft) {
                return null;
            }
            
            return (
                <div class="post-preview">
                    <a class="post-preview__title" href={post.url}>{post.frontmatter.title}</a>
                    <PrettyDate date={post.frontmatter.pubDate} />
                    <p class="post-preview__desc">{post.frontmatter.description}</p>
                </div>
            )
        })
    }
</div>